<h2 mat-dialog-title>
    Cookie Preferences
</h2>

<mat-dialog-content>
    <p>
        Manage your cookie preferences below. Essential cookies cannot be disabled as they
        are required for the site to function correctly.
    </p>

    <mat-divider></mat-divider>

    <!-- Category: Strictly Necessary -->
    <div
        class="cookie-category"
        data-testid="checkbox-strictly-necessary">
        <div class="cookie-category__header">
            <mat-checkbox
                [checked]="true"
                [disabled]="true"
                aria-label="Strictly necessary cookies — always active">
                Strictly Necessary
            </mat-checkbox>
            <span class="cookie-category__required">Always Active</span>
        </div>
        <p class="cookie-category__description">
            Required for authentication, security, and core site functionality.
            These cannot be disabled.
        </p>
    </div>

    <mat-divider></mat-divider>

    <!-- Category: Functional -->
    <!-- [CORRECT] Signal-based change binding — no FormsModule/ngModel needed -->
    <div class="cookie-category">
        <div class="cookie-category__header">
            <mat-checkbox
                [checked]="functional()"
                (change)="functional.set($event.checked)"
                aria-label="Functional cookies">
                Functional
            </mat-checkbox>
        </div>
        <p class="cookie-category__description">
            Remember your preferences such as theme and display settings to provide a
            personalised experience.
        </p>
    </div>

    <mat-divider></mat-divider>

    <!-- Category: Analytics -->
    <div class="cookie-category">
        <div class="cookie-category__header">
            <mat-checkbox
                [checked]="analytics()"
                (change)="analytics.set($event.checked)"
                aria-label="Analytics cookies">
                Analytics
            </mat-checkbox>
        </div>
        <p class="cookie-category__description">
            Help us understand how you use the site so we can improve it. No personal data
            is shared with third parties.
        </p>
    </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button
        mat-stroked-button
        type="button"
        (click)="save()">
        Save My Choices
    </button>
    <button
        mat-stroked-button
        type="button"
        color="primary"
        (click)="acceptAll()">
        Accept All
    </button>
</mat-dialog-actions>