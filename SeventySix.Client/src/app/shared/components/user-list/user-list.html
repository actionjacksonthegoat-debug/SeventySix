<div class="user-list">
	<div class="user-list__header">
		<h2>User Management</h2>

		<!-- Statistics -->
		@if (!isLoading() && hasUsers())
		{
			<div class="user-list__stats">
				<span class="stat">Total: {{ userCount() }}</span>
				<span class="stat stat--active">
					Active: {{ activeUserCount() }}
				</span>
				<span class="stat stat--inactive">
					Inactive: {{ inactiveUserCount() }}
				</span>
			</div>
		}
	</div>

	<!-- Loading State -->
	@if (isLoading())
	{
		<div class="user-list__loading">
			<div class="spinner"></div>
			<p>Loading users...</p>
		</div>
	}

	<!-- Error State -->
	@if (error() && !isLoading())
	{
		<div class="user-list__error">
			<p class="error-message">{{ error() }}</p>
			<button type="button" class="btn btn--primary" (click)="retry()">
				Retry
			</button>
		</div>
	}

	<!-- Success State - User Table -->
	@if (!isLoading() && !error() && hasUsers())
	{
		<div class="user-list__table-container">
			<table class="user-table">
				<thead>
					<tr>
						<th>ID</th>
						<th>Username</th>
						<th>Email</th>
						<th>Full Name</th>
						<th>Status</th>
						<th>Created At</th>
					</tr>
				</thead>
				<tbody>
					@for (user of users(); track trackById($index, user))
					{
						<tr
							[class.inactive-row]="!user.isActive"
							class="clickable-row"
							(click)="onUserClick(user)"
							tabindex="0"
							(keydown.enter)="onUserClick(user)"
							(keydown.space)="onUserClick(user)"
						>
							<td class="user-table__id">{{ user.id }}</td>
							<td class="user-table__username">
								<strong>{{ user.username }}</strong>
							</td>
							<td class="user-table__email">{{ user.email }}</td>
							<td class="user-table__full-name">
								{{ user.fullName || "â€”" }}
							</td>
							<td class="user-table__status">
								<span
									class="status-badge"
									[class]="getStatusClass(user)"
								>
									{{ getStatusText(user) }}
								</span>
							</td>
							<td class="user-table__created">
								{{ user.createdAt | date: "short" }}
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}

	<!-- Empty State -->
	@if (!isLoading() && !error() && !hasUsers())
	{
		<div class="user-list__empty">
			<p>No users available.</p>
			<button type="button" class="btn btn--secondary" (click)="retry()">
				Refresh
			</button>
		</div>
	}
</div>
