// =============================================================================
// BASE STYLES
// =============================================================================
// Minimal base element styles for non-Material elements
// Material components have their own styling - avoid duplicating
// =============================================================================

@use "variables" as vars;

// =============================================================================
// SEMANTIC STATUS COLORS (CSS Custom Properties)
// =============================================================================
// These map to Material Design 3 theme colors for automatic theme adaptation.
// Use these throughout the app for notifications, badges, and status indicators.
// Light and Dark modes use different mappings for optimal visual hierarchy.

// -----------------------------------------------------------------------------
// DARK MODE (default) - Softer container colors for info/error
// -----------------------------------------------------------------------------
:root,
html.dark-theme {
	// Info: Primary Container - softer blue for informational messages
	--color-info: var(--mat-sys-primary-container);
	--color-on-info: var(--mat-sys-on-primary-container);

	// Success: Primary - vibrant for positive actions and success states
	--color-success: var(--mat-sys-primary);
	--color-on-success: var(--mat-sys-on-primary);

	// Warning: Error Primary - vibrant for caution and attention
	--color-warning: var(--mat-sys-error);
	--color-on-warning: var(--mat-sys-on-error);

	// Error: Error Container - softer red for errors
	--color-error: var(--mat-sys-error-container);
	--color-on-error: var(--mat-sys-on-error-container);

	// Log Level Colors (theme-aware) - text colors for log level indicators
	--color-log-verbose: var(--mat-sys-on-surface-variant);
	--color-log-debug: var(--mat-sys-on-surface-variant);
	--color-log-info: var(--color-success);
	--color-log-warning: var(--color-warning);
	--color-log-error: var(--color-error);
	--color-log-fatal: var(--mat-sys-tertiary);

	// Log Level Surface Colors (backgrounds) - 12% opacity for subtle chip backgrounds
	--color-log-verbose-surface: var(--mat-sys-surface-variant);
	--color-log-debug-surface: color-mix(
		in srgb,
		var(--mat-sys-primary) 12%,
		transparent
	);
	--color-log-info-surface: color-mix(
		in srgb,
		var(--color-success) 12%,
		transparent
	);
	--color-log-warning-surface: color-mix(
		in srgb,
		var(--color-warning) 12%,
		transparent
	);
	--color-log-error-surface: color-mix(
		in srgb,
		var(--color-error) 12%,
		transparent
	);
	--color-log-fatal-surface: color-mix(
		in srgb,
		var(--mat-sys-tertiary) 12%,
		transparent
	);

	// State Layer Colors (interactive states)
	--color-backdrop: rgba(0, 0, 0, 0.6);
	--color-hover: rgba(255, 255, 255, 0.04);
	--color-pressed: rgba(255, 255, 255, 0.08);

	// Elevation/Shadow Colors - Light glow for dark backgrounds
	--shadow-color: 255, 255, 255;
	--shadow-opacity: 0.08;
	--shadow-opacity-strong: 0.12;

	// Status Surface Colors (10% opacity backgrounds for status indicators)
	--color-success-surface: color-mix(
		in srgb,
		var(--color-success) 10%,
		transparent
	);
	--color-warning-surface: color-mix(
		in srgb,
		var(--color-warning) 10%,
		transparent
	);
	--color-error-surface: color-mix(
		in srgb,
		var(--color-error) 10%,
		transparent
	);
}

// -----------------------------------------------------------------------------
// LIGHT MODE - More vibrant main colors for better contrast
// -----------------------------------------------------------------------------
html.light-theme {
	// Info: Tertiary Container - distinct color for informational messages
	--color-info: var(--mat-sys-primary-container);
	--color-on-info: var(--mat-sys-on-primary-container);

	// Success: Primary - vibrant for positive actions and success states
	--color-success: var(--mat-sys-primary);
	--color-on-success: var(--mat-sys-on-primary);

	// Warning: Error Container - softer for caution states
	--color-warning: var(--mat-sys-error-container);
	--color-on-warning: var(--mat-sys-on-error-container);

	// Error: Error Primary - vibrant for errors
	--color-error: var(--mat-sys-error);
	--color-on-error: var(--mat-sys-on-error);

	// Log Level Colors (theme-aware) - text colors for log level indicators
	--color-log-verbose: var(--mat-sys-on-surface-variant);
	--color-log-debug: var(--mat-sys-on-surface-variant);
	--color-log-info: var(--color-success);
	--color-log-warning: var(--color-warning);
	--color-log-error: var(--color-error);
	--color-log-fatal: var(--mat-sys-tertiary);

	// Log Level Surface Colors (backgrounds) - 12% opacity for subtle chip backgrounds
	--color-log-verbose-surface: var(--mat-sys-surface-variant);
	--color-log-debug-surface: color-mix(
		in srgb,
		var(--mat-sys-primary) 12%,
		transparent
	);
	--color-log-info-surface: color-mix(
		in srgb,
		var(--color-success) 12%,
		transparent
	);
	--color-log-warning-surface: color-mix(
		in srgb,
		var(--color-warning) 12%,
		transparent
	);
	--color-log-error-surface: color-mix(
		in srgb,
		var(--color-error) 12%,
		transparent
	);
	--color-log-fatal-surface: color-mix(
		in srgb,
		var(--mat-sys-tertiary) 12%,
		transparent
	);

	// State Layer Colors (interactive states)
	--color-backdrop: rgba(0, 0, 0, 0.6);
	--color-hover: rgba(0, 0, 0, 0.04);
	--color-pressed: rgba(0, 0, 0, 0.08);

	// Elevation/Shadow Colors - Dark shadows for light backgrounds
	--shadow-color: 0, 0, 0;
	--shadow-opacity: 0.16;
	--shadow-opacity-strong: 0.23;

	// Status Surface Colors (10% opacity backgrounds for status indicators)
	--color-success-surface: color-mix(
		in srgb,
		var(--color-success) 10%,
		transparent
	);
	--color-warning-surface: color-mix(
		in srgb,
		var(--color-warning) 10%,
		transparent
	);
	--color-error-surface: color-mix(
		in srgb,
		var(--color-error) 10%,
		transparent
	);
}

// Link styles (for non-Material links)
a:not([mat-button]):not([mat-raised-button]):not([mat-flat-button]):not([mat-stroked-button]) {
	color: var(--mat-sys-primary);
	text-decoration: none;
	transition: color vars.$transition-duration-normal ease;

	&:hover {
		color: var(--mat-sys-primary-container);
		text-decoration: underline;
	}

	&:visited {
		color: var(--mat-sys-tertiary);
	}
}

// Code blocks (for documentation/examples)
code:not(.mat-mdc-button-touch-target) {
	font-family: vars.$font-family-monospace;
	font-size: 0.9em;
	padding: 0.125rem vars.$spacing-xs; // 2px 4px - small inline padding
	border-radius: vars.$border-radius-sm;
	background-color: var(--mat-sys-surface-container-high);
	color: var(--mat-sys-on-surface);
}

pre {
	font-family: vars.$font-family-monospace;
	font-size: 0.9em;
	padding: vars.$spacing-md;
	border-radius: vars.$border-radius-md;
	background-color: var(--mat-sys-surface-container-high);
	color: var(--mat-sys-on-surface);
	overflow-x: auto;

	code {
		background: none;
		padding: 0;
	}
}

// Selection colors
::selection {
	background-color: var(--mat-sys-primary);
	color: var(--mat-sys-on-primary);
}

::-moz-selection {
	background-color: var(--mat-sys-primary);
	color: var(--mat-sys-on-primary);
}

// Focus visible styles (for keyboard navigation)
:focus-visible {
	outline: 2px solid var(--mat-sys-primary);
	outline-offset: 2px;
}

// =============================================================================
// MATERIAL COMPONENT CUSTOMIZATIONS
// =============================================================================

// Form field horizontal padding (following 8px grid system)
.mat-mdc-form-field {
	.mat-mdc-text-field-wrapper {
		padding-left: vars.$spacing-md; // 12px
		padding-right: vars.$spacing-md; // 12px
	}
}

// Button horizontal padding
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-outlined-button,
.mat-mdc-unelevated-button {
	padding-left: vars.$spacing-lg; // 16px
	padding-right: vars.$spacing-lg; // 16px
}

// Chip horizontal padding
.mat-mdc-chip {
	padding-left: vars.$spacing-md; // 12px
	padding-right: vars.$spacing-md; // 12px
}

// Admin dashboard tab-group full-height layout
// Required for Grafana embed and scrollable tab content
.admin-dashboard .dashboard-content mat-tab-group {
	.mat-mdc-tab-body-wrapper {
		flex: 1;
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}

	.mat-mdc-tab-body {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}

	.mat-mdc-tab-body-content {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}
}

// =============================================================================
// ICON ALIGNMENT (Global)
// =============================================================================
// Ensures all mat-icon elements are properly vertically aligned.
// This is a global fix for the Material icon baseline issue.
// Applied once here to avoid repetition across component styles (DRY).

mat-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	vertical-align: middle;
	line-height: 1;
	flex-shrink: 0;
}

// Buttons with icons - ensure icon aligns with button text
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-outlined-button,
.mat-mdc-unelevated-button,
.mat-mdc-icon-button,
.mat-mdc-fab,
.mat-mdc-mini-fab {
	mat-icon {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		vertical-align: middle;
	}
}

// Menu items with icons
.mat-mdc-menu-item {
	mat-icon {
		display: inline-flex;
		align-items: center;
		margin-right: vars.$spacing-md;
	}
}

// Chips with icons
.mat-mdc-chip {
	mat-icon {
		display: inline-flex;
		align-items: center;
	}
}

// Card headers with icons - common pattern in admin dashboard
.mat-mdc-card-header,
	.mat-mdc-card-title {
	display: flex;
	align-items: center;
	gap: vars.$spacing-sm;

	mat-icon {
		display: inline-flex;
		align-items: center;
		flex-shrink: 0;
	}
}

// Form field prefix/suffix icons
.mat-mdc-form-field {
	mat-icon[matPrefix],
	mat-icon[matSuffix],
	mat-icon[matIconPrefix],
	mat-icon[matIconSuffix] {
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}
}

// =============================================================================
// FORM ACCESSIBILITY ENHANCEMENTS
// =============================================================================

// Required field indicator for form labels
.form-group.required label::after,
.mat-mdc-form-field.required .mat-mdc-floating-label::after {
	content: " *";
	color: var(--color-error);
}

// Error message styling for non-Material forms
.form-error {
	color: var(--color-error);
	font-size: 0.75rem;
	margin-top: vars.$spacing-xs;
}

// Invalid input visual indicator
input[aria-invalid="true"],
textarea[aria-invalid="true"],
select[aria-invalid="true"] {
	border-color: var(--color-error) !important;
}

// =============================================================================
// REDUCED MOTION ACCESSIBILITY
// =============================================================================
// Respects user preference for reduced motion (vestibular disorders, motion sensitivity)
// WCAG 2.1 Success Criterion 2.3.3 - Animation from Interactions

@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	// Disable Material ripple effect
	.mat-mdc-button-ripple,
	.mat-mdc-focus-indicator {
		display: none !important;
	}
}
