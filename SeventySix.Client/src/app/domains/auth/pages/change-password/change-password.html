<div class="change-password-container">
	<div class="change-password-card">
		<h1>Change Password</h1>

		@if (isRequired()) {
		<p
			class="required-notice"
			role="alert">
			You must change your password before continuing.
		</p>
		}

		<form
			(ngSubmit)="onSubmit()"
			#form="ngForm">
			<div class="form-group required">
				<label for="currentPassword">Current Password</label>
				<input
					type="password"
					id="currentPassword"
					name="currentPassword"
					[(ngModel)]="currentPassword"
					#currentPasswordField="ngModel"
					required
					[disabled]="isLoading()"
					autocomplete="current-password"
					aria-required="true"
					[attr.aria-invalid]="
						currentPasswordField.invalid &&
						currentPasswordField.touched
					"
				/>
			</div>

			<div class="form-group required">
				<label for="newPassword">New Password</label>
				<input
					type="password"
					id="newPassword"
					name="newPassword"
					[(ngModel)]="newPassword"
					#newPasswordField="ngModel"
					required
					[minlength]="PASSWORD_MIN_LENGTH"
					[disabled]="isLoading()"
					autocomplete="new-password"
					aria-required="true"
					[attr.aria-invalid]="
						newPasswordField.invalid && newPasswordField.touched
					"
					aria-describedby="newPassword-hint"
				/>
				<small
					id="newPassword-hint"
					class="hint">
					At least 8 characters with uppercase, lowercase, and a digit
				</small>
			</div>

			<div class="form-group required">
				<label for="confirmPassword">Confirm New Password</label>
				<input
					type="password"
					id="confirmPassword"
					name="confirmPassword"
					[(ngModel)]="confirmPassword"
					#confirmPasswordField="ngModel"
					required
					[disabled]="isLoading()"
					autocomplete="new-password"
					aria-required="true"
					[attr.aria-invalid]="
						confirmPasswordField.invalid &&
						confirmPasswordField.touched
					"
				/>
			</div>

			<button
				mat-flat-button
				color="primary"
				type="submit"
				[disabled]="isLoading() || !form.valid"
				class="submit-button"
				[attr.aria-busy]="isLoading()">
				@if (isLoading()) {
				<span>Changing...</span>
				} @else {
				<span>Change Password</span>
				}
			</button>
		</form>
	</div>
</div>
