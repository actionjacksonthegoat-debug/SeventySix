<div class="register-container">
	<div class="register-card">
		@if (submitted()) {
		<div
			class="success-state"
			role="status"
			aria-live="polite">
			<h1>Check Your Email</h1>
			<p>
				If this email address is available, we've sent a verification link. Please check your inbox and spam
				folder.
			</p>
			<a
				routerLink="/auth/login"
				mat-stroked-button
				color="primary"
				class="submit-button">
				Return to Sign In
			</a>
		</div>
		} @else {
		<h1>Create Account</h1>
		<p class="description">
			Enter your email address to get started. We'll send you a link to complete your registration.
		</p>

		<form
			[formGroup]="registerForm"
			(ngSubmit)="onSubmit()"
			class="register-form">
			<mat-form-field appearance="outline">
				<mat-label>Email Address</mat-label>
				<input
					matInput
					id="email"
					type="email"
					formControlName="email"
					autocomplete="email"
					placeholder="Enter your email"
					required
					aria-required="true"
					[attr.aria-invalid]="
						registerForm.get('email')?.invalid &&
						registerForm.get('email')?.touched
					"
				/>
				@if (emailError()) {
				<mat-error>{{ emailError() }}</mat-error>
				}
			</mat-form-field>

			@if (altchaEnabled) {
			<div class="altcha-container">
				<app-altcha-widget
					[challengeUrl]="challengeUrl"
					[hideFooter]="true"
					(verified)="onAltchaVerified($event)">
				</app-altcha-widget>
			</div>
			}

			<button
				mat-stroked-button
				color="primary"
				type="submit"
				class="submit-button"
				[disabled]="!canSubmit()"
				[attr.aria-busy]="isLoading()">
				@if (isLoading()) { Sending... } @else { Continue }
			</button>
		</form>

		<div class="links">
			<span>Already have an account?</span>
			<a routerLink="/auth/login">Sign In</a>
		</div>
		}
	</div>
</div>
