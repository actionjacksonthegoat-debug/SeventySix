<div class="set-password-container">
	<div class="set-password-card">
		@if (tokenValid())
		{
			<h1>Set New Password</h1>
			<p class="subtitle">
				Enter your new password below. Password must be at least 8
				characters.
			</p>

			<form
				(ngSubmit)="onSubmit()"
				class="set-password-form"
				#setPasswordForm="ngForm"
			>
				<div class="form-group required">
					<label for="newPassword">New Password</label>
					<input
						id="newPassword"
						type="password"
						[(ngModel)]="newPassword"
						name="newPassword"
						#newPasswordField="ngModel"
						required
						minlength="8"
						autocomplete="new-password"
						placeholder="Enter new password"
						aria-required="true"
						[attr.aria-invalid]="newPasswordField.invalid && newPasswordField.touched"
						aria-describedby="newPassword-hint"
					/>
					<span id="newPassword-hint" class="hint">
						At least 8 characters required
					</span>
				</div>

				<div class="form-group required">
					<label for="confirmPassword">Confirm Password</label>
					<input
						id="confirmPassword"
						type="password"
						[(ngModel)]="confirmPassword"
						name="confirmPassword"
						#confirmPasswordField="ngModel"
						required
						minlength="8"
						autocomplete="new-password"
						placeholder="Confirm new password"
						aria-required="true"
						[attr.aria-invalid]="confirmPasswordField.invalid && confirmPasswordField.touched"
					/>
				</div>

				<button
					type="submit"
					class="btn-primary"
					[disabled]="isLoading()"
					[attr.aria-busy]="isLoading()"
				>
					@if (isLoading())
					{
						Setting Password...
					}
					@else
					{
						Set Password
					}
				</button>
			</form>
		}
		@else
		{
			<div role="alert">
				<h1>Invalid Link</h1>
				<p class="error-message">
					This password reset link is invalid or has expired. Please
					contact your administrator to request a new password reset.
				</p>
				<a href="/auth/login" class="btn-secondary">Return to Login</a>
			</div>
		}
	</div>
</div>
