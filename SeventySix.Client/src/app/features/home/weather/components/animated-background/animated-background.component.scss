@use "variables" as vars;
@use "mixins" as mixins;

:host {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
	overflow: hidden;
}

.animated-background {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-size: cover;
	background-position: center;
	background-repeat: no-repeat;
}

.smooth-transition {
	transition: background 1.5s ease-in-out;

	&.no-animation {
		transition: none;
	}
}

.gradient-overlay {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(
		180deg,
		rgba(0, 0, 0, 0.1) 0%,
		rgba(0, 0, 0, 0.3) 100%
	);
}

// Weather condition backgrounds using shared mixin
.bg-clear {
	@include mixins.weather-gradient(
		(#87ceeb 0%, #4a90e2 50%, #f4a460 100%),
		sunnyPulse,
		20s
	);
}

.bg-clouds {
	@include mixins.weather-gradient(
		(#b0bec5 0%, #78909c 50%, #546e7a 100%),
		cloudyDrift,
		30s
	);
}

.bg-rain {
	@include mixins.weather-gradient(
		(#4a5f7a 0%, #2c3e50 50%, #1a252f 100%),
		rainFlow,
		15s
	);
	@include mixins.weather-overlay("rain", 1s);
}

.bg-drizzle {
	@include mixins.weather-gradient(
		(#607d8b 0%, #455a64 50%, #37474f 100%),
		drizzleFlow,
		20s
	);
	@include mixins.weather-overlay("drizzle", 1.5s);
}

.bg-snow {
	@include mixins.weather-gradient(
		(#e3f2fd 0%, #bbdefb 50%, #90caf9 100%),
		snowfall,
		25s
	);
	@include mixins.weather-overlay("snow", 20s);
}

.bg-thunderstorm {
	@include mixins.weather-gradient(
		(#37474f 0%, #263238 50%, #1a1a2e 100%),
		thunderFlash,
		5s
	);
}

.bg-mist {
	@include mixins.weather-gradient(
		(#cfd8dc 0%, #b0bec5 50%, #90a4ae 100%),
		mistWave,
		30s
	);
	@include mixins.weather-overlay("mist", 20s);
}

// Keyframe animations (kept in component - specific to weather)
@keyframes sunnyPulse {
	0%,
	100% {
		filter: brightness(1);
	}
	50% {
		filter: brightness(1.1);
	}
}

@keyframes cloudyDrift {
	0%,
	100% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
}

@keyframes rainFlow {
	0% {
		filter: brightness(0.8);
	}
	50% {
		filter: brightness(0.6);
	}
	100% {
		filter: brightness(0.8);
	}
}

@keyframes rainDrop {
	0% {
		transform: translateY(0);
	}
	100% {
		transform: translateY(50px);
	}
}

@keyframes drizzleFlow {
	0%,
	100% {
		filter: brightness(0.9);
	}
	50% {
		filter: brightness(0.7);
	}
}

@keyframes drizzleDrop {
	0% {
		transform: translateY(0);
	}
	100% {
		transform: translateY(40px);
	}
}

@keyframes snowfall {
	0%,
	100% {
		filter: brightness(1.1);
	}
	50% {
		filter: brightness(1);
	}
}

@keyframes snowDrift {
	0% {
		transform: translateY(0) translateX(0);
	}
	100% {
		transform: translateY(100px) translateX(20px);
	}
}

@keyframes thunderFlash {
	0%,
	90%,
	100% {
		filter: brightness(0.5);
	}
	93%,
	96% {
		filter: brightness(1.5);
		box-shadow: inset 0 0 100px rgba(255, 255, 255, 0.5);
	}
}

@keyframes mistWave {
	0%,
	100% {
		filter: blur(0px);
	}
	50% {
		filter: blur(2px);
	}
}

@keyframes mistFlow {
	0%,
	100% {
		transform: translateX(0) scale(1);
		opacity: 0.5;
	}
	50% {
		transform: translateX(50px) scale(1.1);
		opacity: 0.7;
	}
}

// Respect reduced motion media query
@media (prefers-reduced-motion: reduce) {
	.animated-background {
		animation: none !important;
		transition: none !important;

		&::before {
			animation: none !important;
		}
	}
}
