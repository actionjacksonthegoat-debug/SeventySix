@use "variables" as vars;

.health-status-panel {
	width: 100%;

	.loading-container,
	.error-container {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		min-height: vars.$container-width-sm;
		gap: vars.$spacing-md;

		p {
			margin: 0;
			color: var(--mat-sys-on-surface-variant);
			font-size: vars.$font-size-base;
		}
	}

	.error-container {
		mat-icon {
			font-size: vars.$icon-size-xl;
			width: vars.$icon-size-xl;
			height: vars.$icon-size-xl;
		}
	}

	// Main Health Card
	.health-card {
		border-radius: vars.$border-radius-card;
		overflow: hidden;

		.health-header {
			background: linear-gradient(
				135deg,
				var(--mat-sys-primary-container) 0%,
				var(--mat-sys-surface) 100%
			);
			padding: vars.$spacing-lg;
			display: flex;
			flex-direction: column;
			gap: vars.$spacing-md;

			.header-content {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				flex-wrap: wrap;
				gap: vars.$spacing-md;

				.title-section {
					display: flex;
					align-items: center;
					gap: vars.$spacing-md;

					.header-icon {
						font-size: vars.$icon-size-lg;
						width: vars.$icon-size-lg;
						height: vars.$icon-size-lg;
						color: var(--mat-sys-primary);
					}
					mat-card-title {
						margin: 0;
						font-size: vars.$font-size-xxl;
						font-weight: vars.$font-weight-semibold;
					}
					mat-card-subtitle {
						margin-top: vars.$spacing-xs;
						font-size: vars.$font-size-sm;
					}
				}

				.status-section {
					display: flex;
					align-items: center;
					gap: vars.$spacing-sm;

					mat-chip {
						font-size: vars.$font-size-base;
						font-weight: vars.$font-weight-semibold;
						padding: vars.$spacing-sm vars.$spacing-md;
						display: inline-flex;
						align-items: center;
						gap: vars.$spacing-xs;

						mat-icon {
							font-size: vars.$icon-size-md;
							width: vars.$icon-size-md;
							height: vars.$icon-size-md;
						}
						&.status-healthy {
							background-color: rgba(76, 175, 80, 0.15);
							color: rgb(56, 142, 60);
							border: 1px solid rgba(76, 175, 80, 0.5);
						}
						&.status-degraded {
							background-color: rgba(255, 152, 0, 0.15);
							color: rgb(230, 126, 34);
							border: 1px solid rgba(255, 152, 0, 0.5);
						}
						&.status-unhealthy {
							background-color: rgba(244, 67, 54, 0.15);
							color: rgb(211, 47, 47);
							border: 1px solid rgba(244, 67, 54, 0.5);
						}
					}
					.issues-badge {
						background-color: rgba(255, 152, 0, 0.15);
						color: rgb(230, 126, 34);
						border: 1px solid rgba(255, 152, 0, 0.5);
						font-weight: vars.$font-weight-semibold;
					}
				}
			}
			.action-buttons {
				display: flex;
				align-items: center;
				gap: vars.$spacing-md;
				flex-wrap: wrap;
			}
		}

		mat-divider {
			margin: 0;
		}

		.health-content {
			padding: vars.$spacing-lg;

			@media #{vars.$breakpoint-mobile} {
				padding: vars.$spacing-md;
			}
		}
	}

	// Health Grid Layout
	.health-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: vars.$spacing-lg;

		@media (max-width: vars.$breakpoint-tablet) {
			grid-template-columns: 1fr;
		}
	}

	// Metric Cards
	.metric-card {
		background: var(--mat-sys-surface-container);
		border: 1px solid var(--mat-sys-outline-variant);
		border-radius: vars.$border-radius-base;
		padding: vars.$spacing-md;
		transition: vars.$transition-all;

		&:hover {
			box-shadow: vars.$elevation-md;
			transform: translateY(-2px);
		}

		// Wide cards span 2 columns
		&.wide-card {
			grid-column: span 2;

			@media (max-width: vars.$breakpoint-tablet) {
				grid-column: span 1;
			}
		}

		.card-header {
			display: flex;
			align-items: center;
			gap: vars.$spacing-sm;
			margin-bottom: vars.$spacing-md;
			padding-bottom: vars.$spacing-sm;
			border-bottom: 1px solid var(--mat-sys-outline-variant);

			mat-icon {
				font-size: vars.$icon-size-lg;
				width: vars.$icon-size-lg;
				height: vars.$icon-size-lg;

				&.icon-healthy {
					color: rgb(76, 175, 80);
				}

				&.icon-error {
					color: rgb(244, 67, 54);
				}

				&.icon-primary {
					color: var(--mat-sys-primary);
				}

				&.icon-muted {
					color: var(--mat-sys-on-surface-variant);
				}
			}

			h3 {
				margin: 0;
				flex: 1;
				font-size: vars.$font-size-lg;
				font-weight: vars.$font-weight-semibold;
			}

			.status-chip {
				font-size: vars.$font-size-xs;
				padding: vars.$spacing-xs vars.$spacing-sm;
				font-weight: vars.$font-weight-medium;

				&.status-healthy {
					background-color: rgba(76, 175, 80, 0.1);
					color: rgb(76, 175, 80);
				}
				&.status-degraded {
					background-color: rgba(255, 152, 0, 0.1);
					color: rgb(255, 152, 0);
				}
				&.status-unhealthy {
					background-color: rgba(244, 67, 54, 0.1);
					color: rgb(244, 67, 54);
				}
			}
		}

		.card-content {
			display: flex;
			flex-direction: column;
			gap: vars.$spacing-sm;
		}

		// Metric Rows
		.metric-row {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: vars.$spacing-xs 0;

			.metric-label {
				font-size: vars.$font-size-sm;
				color: var(--mat-sys-on-surface-variant);
				font-weight: vars.$font-weight-medium;
			}

			.metric-value {
				font-size: vars.$font-size-base;
				font-weight: vars.$font-weight-semibold;
				display: flex;
				align-items: center;
				gap: vars.$spacing-xs;

				.inline-icon {
					font-size: vars.$icon-size-sm;
					width: vars.$icon-size-sm;
					height: vars.$icon-size-sm;
				}
				&.value-success {
					color: rgb(76, 175, 80);
				}
				&.value-warning {
					color: rgb(255, 152, 0);
				}
				&.value-error {
					color: rgb(244, 67, 54);
				}
			}
		}

		// Resource Metrics
		.resource-metric {
			margin-bottom: vars.$spacing-sm;

			.resource-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: vars.$spacing-xs;

				.metric-label {
					font-size: vars.$font-size-sm;
					color: var(--mat-sys-on-surface-variant);
					font-weight: vars.$font-weight-medium;
				}

				.metric-value {
					font-size: vars.$font-size-sm;
					font-weight: vars.$font-weight-semibold;
					&.value-warning {
						color: rgb(255, 152, 0);
					}
					&.value-error {
						color: rgb(244, 67, 54);
					}
				}
			}

			mat-progress-bar {
				height: vars.$spacing-sm;
				border-radius: vars.$border-radius-sm;

				&.normal ::ng-deep .mdc-linear-progress__bar-inner {
					border-color: rgb(76, 175, 80) !important;
				}

				&.warning ::ng-deep .mdc-linear-progress__bar-inner {
					border-color: rgb(255, 152, 0) !important;
				}

				&.critical ::ng-deep .mdc-linear-progress__bar-inner {
					border-color: rgb(244, 67, 54) !important;
				}
			}
		}

		// API Items
		.api-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: vars.$spacing-sm;
			background: var(--mat-sys-surface);
			border-radius: vars.$border-radius-sm;
			border: 1px solid var(--mat-sys-outline-variant);

			.api-name {
				font-weight: vars.$font-weight-semibold;
				color: var(--mat-sys-on-surface);
				font-size: vars.$font-size-sm;
			}

			.api-status {
				display: flex;
				align-items: center;
				gap: vars.$spacing-sm;

				.status-chip-sm {
					font-size: vars.$font-size-xs;
					padding: vars.$spacing-xs vars.$spacing-sm;
					&.status-healthy {
						background-color: rgba(76, 175, 80, 0.1);
						color: rgb(76, 175, 80);
					}
					&.status-unhealthy {
						background-color: rgba(244, 67, 54, 0.1);
						color: rgb(244, 67, 54);
					}
				}
				.response-time {
					font-size: vars.$font-size-xs;
					color: var(--mat-sys-on-surface-variant);
					font-weight: vars.$font-weight-medium;
				}
			}
		}

		// Empty State
		&.empty-state {
			opacity: 0.7;

			.empty-message {
				text-align: center;
				color: var(--mat-sys-on-surface-variant);
				font-style: italic;
				padding: vars.$spacing-md 0;
				margin: 0;
			}
		}
	}

	// List items for error sources and request paths
	.list-item {
		padding: vars.$spacing-sm 0;
		border-bottom: 1px solid var(--mat-sys-outline-variant);

		&:last-child {
			border-bottom: none;
		}
	}

	.list-item-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: vars.$spacing-xs;
	}

	.list-item-name {
		font-size: vars.$font-size-sm;
		color: var(--mat-sys-on-surface);
		font-weight: vars.$font-weight-medium;
		flex: 1;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		margin-right: vars.$spacing-sm;

		&.path {
			font-family: monospace;
			font-size: vars.$font-size-xs;
		}
	}

	.count-chip {
		background: var(--mat-sys-primary);
		color: var(--mat-sys-on-primary);
		font-size: vars.$font-size-xs;
		font-weight: vars.$font-weight-bold;
		min-height: auto !important;
		height: 20px !important;
		padding: 0 vars.$spacing-xs !important;
	}

	.list-item-bar {
		width: 100%;
		height: 4px;
		background: var(--mat-sys-surface-container-highest);
		border-radius: vars.$border-radius-sm;
		overflow: hidden;
	}

	.bar-fill {
		height: 100%;
		transition: width vars.$transition-duration-base
			vars.$transition-easing-standard;

		&.primary-bar {
			background: var(--mat-sys-primary);
		}

		&.error-bar {
			background: rgb(244, 67, 54);
		}
	}

	.inline-icon {
		font-size: vars.$icon-size-sm;
		width: vars.$icon-size-sm;
		height: vars.$icon-size-sm;
		vertical-align: middle;
		margin-right: 2px; // Extra small spacing (0.25 * 8px grid)
	}
}
