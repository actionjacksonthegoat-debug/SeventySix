{
	"ConnectionStrings": {
		"DefaultConnection": "Host=localhost;Port=5432;Database=seventysix;Username=postgres;Password=PLACEHOLDER_USE_USER_SECRETS;Pooling=true;Minimum Pool Size=5;Maximum Pool Size=100;Connection Lifetime=0;"
	},
	"Serilog": {
		"MinimumLevel": {
			"Default": "Information",
			"Override": {
				"Microsoft.AspNetCore": "Warning",
				"Microsoft.EntityFrameworkCore": "Warning",
				"System": "Warning"
			}
		},
		"WriteTo": [
			{
				"Name": "Console",
				"Args": {
					"outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
				}
			},
			{
				"Name": "File",
				"Args": {
					"path": "logs/seventysix-.txt",
					"rollingInterval": "Day",
					"retainedFileCountLimit": 30,
					"outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] {SourceContext} {Message:lj} {Properties:j}{NewLine}{Exception}"
				}
			}
		],
		"Enrich": [
			"FromLogContext",
			"WithMachineName",
			"WithThreadId",
			"WithExceptionDetails"
		],
		"Properties": {
			"Application": "SeventySix"
		}
	},
	"LoggingSettings": {
		"LogDirectory": "logs",
		"RetentionDays": 30
	},
	"AllowedHosts": "*",
	"Security": {
		"EnforceHttps": true,
		"HttpsPort": 7074,
		"HstsMaxAgeSeconds": 31536000,
		"HstsIncludeSubdomains": true,
		"AllowHttpForHealthChecks": false,
		"AllowHttpForMetrics": true,
		"AllowHttpForOpenApi": false
	},
	"Testing": {
		"RunIntegrationTests": false
	},
	"Cors": {
		"AllowedOrigins": ["http://localhost:4200", "https://localhost:4200"]
	},
	"OpenWeather": {
		"ApiKey": "",
		"BaseUrl": "https://api.openweathermap.org",
		"DailyCallLimit": 250,
		"CacheDurationMinutes": 5,
		"TimeoutSeconds": 10,
		"RetryCount": 2,
		"CircuitBreakerThreshold": 5,
		"CircuitBreakerDurationSeconds": 30,
		"DefaultLatitude": 0.0,
		"DefaultLongitude": 0.0,
		"Units": "metric",
		"Language": "en"
	},
	"Polly": {
		"RetryCount": 3,
		"RetryDelaySeconds": 2,
		"CircuitBreakerFailureThreshold": 5,
		"CircuitBreakerSamplingDurationSeconds": 60,
		"CircuitBreakerBreakDurationSeconds": 30,
		"TimeoutSeconds": 10,
		"UseJitter": true
	},
	"Cache": {
		"OutputCache": {
			"Policies": {
				"weather": {
					"DurationSeconds": 300,
					"VaryByQuery": [
						"latitude",
						"longitude",
						"units",
						"language",
						"exclude",
						"timestamp"
					],
					"Tag": "weather",
					"Enabled": true
				},
				"users": {
					"DurationSeconds": 60,
					"VaryByQuery": ["id"],
					"Tag": "users",
					"Enabled": true
				},
				"logs": {
					"DurationSeconds": 300,
					"VaryByQuery": [
						"logLevel",
						"startDate",
						"endDate",
						"sourceContext",
						"requestPath",
						"page",
						"pageSize"
					],
					"Tag": "logs",
					"Enabled": true
				},
				"logcharts": {
					"DurationSeconds": 120,
					"VaryByQuery": [
						"startDate",
						"endDate",
						"hoursBack",
						"topN",
						"count",
						"period"
					],
					"Tag": "logs",
					"Enabled": true
				},
				"health": {
					"DurationSeconds": 30,
					"VaryByQuery": [],
					"Tag": "health",
					"Enabled": true
				},
				"thirdpartyrequests": {
					"DurationSeconds": 60,
					"VaryByQuery": ["page", "pageSize"],
					"Tag": "third-party",
					"Enabled": true
				}
			}
		}
	}
}
