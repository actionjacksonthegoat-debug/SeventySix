# Prometheus Configuration for SeventySix
# Collects metrics from OpenTelemetry Collector and monitors Jaeger

global:
    scrape_interval: 15s
    evaluation_interval: 15s
    external_labels:
        cluster: "seventysix"
        environment: "development"

# Scrape configurations
scrape_configs:
    # SeventySix API metrics via OpenTelemetry Collector
    # OTel Collector receives OTLP from API and exports Prometheus format
    - job_name: "seventysix-api"
      static_configs:
          - targets: ["otel-collector:8889"]
            labels:
                environment: "docker"
      metrics_path: "/metrics"
      scrape_interval: 10s

    # Prometheus self-monitoring
    - job_name: "prometheus"
      static_configs:
          - targets: ["localhost:9090"]

    # Jaeger metrics
    - job_name: "jaeger"
      static_configs:
          - targets: ["jaeger:14269"]

    # Redis/Valkey metrics via redis-exporter
    # Provides cache hit rate, memory usage, operations/sec, connected clients
    - job_name: "redis"
      static_configs:
          - targets: ["redis-exporter:9121"]
      scrape_interval: 5s
