# SeventySix Environment Variables
# Single source of truth for all secret and environment configuration.
# Used by Docker Compose AND Visual Studio Container debugging.
#
# Copy this file to .env and update with your values
# DO NOT COMMIT .env TO GIT (.env is in .gitignore)
#
# ===========================
# ASP.NET Core Configuration Mapping
# ===========================
# These variables are automatically mapped to hierarchical configuration:
#   JWT_SECRET_KEY        -> Jwt:SecretKey
#   GITHUB_CLIENT_ID      -> Auth:OAuth:Providers:0:ClientId
#   GITHUB_CLIENT_SECRET  -> Auth:OAuth:Providers:0:ClientSecret
#   EMAIL_SMTP_USERNAME   -> Email:SmtpUsername
#   EMAIL_SMTP_PASSWORD   -> Email:SmtpPassword
#   EMAIL_FROM_ADDRESS    -> Email:FromAddress
#   ADMIN_EMAIL           -> AdminSeeder:Email
#   ADMIN_PASSWORD        -> AdminSeeder:InitialPassword
#   DB_NAME/USER/PASSWORD -> Database:Name/User/Password (for connection string)
#   DATA_PROTECTION_*     -> DataProtection:* (key encryption settings)

# ===========================
# Database (PostgreSQL)
# ===========================
# DB_HOST: Use 'localhost' for Visual Studio debugging (connects via Docker exposed port)
# DB_PORT: Use 5433 - Docker postgres is exposed on 5433 to avoid conflict with local PostgreSQL on 5432
# Docker Compose API container uses internal network (postgres:5432), not this port
DB_HOST=localhost
DB_PORT=5433
DB_NAME=seventysix
DB_USER=postgres
DB_PASSWORD=your-secure-database-password

# ===========================
# JWT Authentication
# ===========================
# Generate with: [System.Guid]::NewGuid().ToString("N") + [System.Guid]::NewGuid().ToString("N")
JWT_SECRET_KEY=your-64-character-secret-key-here-generate-with-command-above

# ===========================
# GitHub OAuth
# ===========================
# Get from https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-oauth-client-id
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret

# ===========================
# Email (Brevo SMTP)
# ===========================
# Get credentials from https://app.brevo.com/settings/keys/smtp
EMAIL_SMTP_USERNAME=your-smtp-username@smtp-brevo.com
EMAIL_SMTP_PASSWORD=your-smtp-password-here
EMAIL_FROM_ADDRESS=your-verified-sender@example.com

# ===========================
# ALTCHA (Bot Protection)
# ===========================
# HMAC key for ALTCHA challenge signing (base64-encoded, minimum 256 bits/32 bytes)
# Generate with: [Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(32))
ALTCHA_HMAC_KEY=your-base64-encoded-32-byte-hmac-key-here

# ===========================
# Grafana (Observability)
# ===========================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password

# ===========================
# pgAdmin (Web UI for Postgres)
# ===========================
# Used by the pgAdmin container:
# PGADMIN_DEFAULT_EMAIL and PGADMIN_DEFAULT_PASSWORD
PGADMIN_DEFAULT_EMAIL=pgadmin@example.com
PGADMIN_DEFAULT_PASSWORD=your-secure-pgadmin-password

# ===========================
# Admin Seeding (initial admin user)
# ===========================
# Used by AdminSeeder - set in environment for production
# AdminSeeder__InitialPassword or ADMIN_PASSWORD may be used by scripts
ADMIN_EMAIL=admin@seventysix.local
ADMIN_PASSWORD=your-secure-admin-password

# ===========================
# Data Protection Keys
# ===========================
# These settings protect authentication tokens and cookies.
# In production, use a properly secured certificate.
#
# Mapping: DATA_PROTECTION_* -> DataProtection:*

# Enable certificate-based key protection (recommended for production)
DATA_PROTECTION_USE_CERTIFICATE=false

# Path to PFX certificate file (Docker path)
DATA_PROTECTION_CERTIFICATE_PATH=/app/keys/dataprotection.pfx

# Certificate password (generate a strong password for production)
# Option A (plaintext - convenient for local development):
DATA_PROTECTION_CERTIFICATE_PASSWORD=your-certificate-password
#
# Option B (machine-encrypted secure string) - more secure for local machine storage:
# Generate (on this machine/account):
#   $encrypted = (ConvertTo-SecureString "YourPassword" -AsPlainText -Force | ConvertFrom-SecureString)
# Then put the encrypted value in .env:
#   DATA_PROTECTION_CERTIFICATE_PASSWORD_SECURE=<encrypted-string>
# NOTE: Encrypted string is protected to this user/machine and cannot be decrypted on other accounts/computers.
#
# Allow unprotected keys in development (convenient but less secure)
# Set to false for production-like local testing
DATA_PROTECTION_ALLOW_UNPROTECTED_DEV=true

# Optional: Override keys directory (usually not needed)
# DATA_PROTECTION_KEYS_DIRECTORY=/app/keys
